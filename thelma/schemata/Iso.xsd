<?xml version="1.0" encoding="UTF-8"?>
<schema
    targetNamespace="http://schemata.thelma.org/iso"
    elementFormDefault="qualified"
    xmlns="http://www.w3.org/2001/XMLSchema"
    xmlns:iso="http://schemata.thelma.org/iso"
    xmlns:isor="http://schemata.thelma.org/isorequest"
    xmlns:isr="http://schemata.thelma.org/isostockrack"
    xmlns:j="http://schemata.thelma.org/job"
    xmlns:lp="http://schemata.thelma.org/libraryplate"
    xmlns:mdps="http://schemata.thelma.org/moleculedesignpoolset"
    xmlns:r="http://schemata.thelma.org/rack"
    xmlns:rl="http://schemata.thelma.org/racklayout"
    xmlns:sh="http://schemata.thelma.org/shared"
>
    <import
        schemaLocation="IsoRequest.xsd"
        namespace="http://schemata.thelma.org/isorequest"
    >
    </import>
    <import
        schemaLocation="IsoStockRack.xsd"
        namespace="http://schemata.thelma.org/isostockrack"
    >
    </import>
    <import
        schemaLocation="Job.xsd"
        namespace="http://schemata.thelma.org/job"
    >
    </import>
    <import
        schemaLocation="LibraryPlate.xsd"
        namespace="http://schemata.thelma.org/libraryplate"
    >
    </import>
    <import
        schemaLocation="MoleculeDesignPoolSet.xsd"
        namespace="http://schemata.thelma.org/moleculedesignpoolset"
    >
    </import>
    <import
        schemaLocation="Rack.xsd"
        namespace="http://schemata.thelma.org/rack"
    >
    </import>
    <import
        schemaLocation="RackLayout.xsd"
        namespace="http://schemata.thelma.org/racklayout"
    >
    </import>
    <import
        schemaLocation="Shared.xsd"
        namespace="http://schemata.thelma.org/shared"
    >
    </import>

    <group name="IsoBase">
        <sequence>
            <element
                name="iso_type"
                type="string"
            >
            </element>
            <element
                name="label"
                type="string"
            >
            </element>
            <element
                name="status"
                type="string"
            >
            </element>
            <element
                ref="rl:rack_layout"
                minOccurs="0"
                maxOccurs="1"
            >
            </element>
            <element
                ref="j:iso_job"
                minOccurs="0"
                maxOccurs="1"
            >
            </element>
            <element
                name="number_stock_racks"
                type="nonNegativeInteger"
            >
            </element>
            <element
                ref="mdps:molecule_design_pool_set"
                minOccurs="0"
                maxOccurs="1"
            >
            </element>
            <element
                name="optimizer_excluded_racks"
                type="string"
                minOccurs="0"
                maxOccurs="1"
            >
            </element>
            <element
                name="optimizer_requested_tubes"
                type="string"
                minOccurs="0"
                maxOccurs="1"
            >
            </element>
            <element
                name="preparation_plates"
                type="r:RackCollectionType"
                minOccurs="0"
                maxOccurs="1"
            >
            </element>
            <element
                name="aliquot_plates"
                type="r:RackCollectionType"
                minOccurs="0"
                maxOccurs="1"
            >
            </element>
            <element
                ref="isr:stock_racks"
                minOccurs="0"
                maxOccurs="1"
            >
            </element>
        </sequence>
    </group>

    <complexType
        name="IsoType"
        abstract="true"
    >
        <complexContent>
            <extension base="sh:ResourceType">
            </extension>
        </complexContent>
    </complexType>

    <complexType name="LabIsoType">
        <complexContent>
            <extension base="iso:IsoType">
                <choice>
                    <element
                        name="link"
                        type="iso:LabIsoLinkType"
                    >
                    </element>
                    <sequence>
                        <group ref="iso:IsoBase">
                        </group>
                        <element
                            ref="isor:lab_iso_request"
                            minOccurs="0"
                            maxOccurs="1"
                        >
                        </element>
                        <element
                            ref="lp:library_plates"
                            minOccurs="0"
                            maxOccurs="1"
                        >
                        </element>
                        <element
                            name="requested_library_plates"
                            type="string"
                            minOccurs="0"
                            maxOccurs="1"
                        >
                        </element>
                    </sequence>
                </choice>
            </extension>
        </complexContent>
    </complexType>

    <complexType name="IsoCollectionType">
        <choice>
            <element
                ref="iso:lab_iso"
                maxOccurs="unbounded"
                minOccurs="0"
            >
            </element>
            <element
                name="link"
                type="iso:IsoCollectionLinkType"
                maxOccurs="1"
                minOccurs="0"
            >
            </element>
        </choice>
    </complexType>

    <complexType name="IsoLinkType">
        <complexContent>
            <restriction base="sh:LinkType">
                <attribute
                    name="rel"
                    type="string"
                    fixed="http://relations.thelma.org/iso"
                ></attribute>
            </restriction>
        </complexContent>
    </complexType>

    <complexType name="LabIsoLinkType">
        <complexContent>
            <restriction base="sh:LinkType">
                <attribute
                    name="rel"
                    type="string"
                    fixed="http://relations.thelma.org/lab-iso"
                ></attribute>
            </restriction>
        </complexContent>
    </complexType>

    <complexType name="IsoCollectionLinkType">
        <complexContent>
            <restriction base="sh:LinkType">
                <attribute
                    name="rel"
                    type="string"
                    fixed="http://relations.thelma.org/iso-collection"
                ></attribute>
            </restriction>
        </complexContent>
    </complexType>

    <element
        name="iso"
        type="iso:IsoType"
    >
    </element>

    <element
        name="lab_iso"
        type="iso:LabIsoType"
    >
    </element>

    <element
        name="isos"
        type="iso:IsoCollectionType"
    ></element>

</schema>